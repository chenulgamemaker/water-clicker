<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Water Clicker</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #e0f7fa; margin: 0; }
  input, button { margin: 5px; padding: 10px; cursor: pointer; }
  #upgradesContainer { display: flex; justify-content: center; gap: 20px; margin-top: 10px; }
  .upgradeColumn { max-height: 400px; overflow-y: auto; width: 250px; background: #b2dfdb; padding: 10px; border-radius: 5px; }
  .upgrade { margin: 5px 0; padding: 5px; border: 1px solid #00796b; border-radius: 5px; background: #e0f2f1; }

  /* Water-drop click button */
  #waterButton {
    width: 100px;
    height: 130px;
    background: linear-gradient(to bottom, #4fc3f7 0%, #0288d1 100%);
    border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
    border: 2px solid #0288d1;
    display: inline-block;
    position: relative;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    cursor: pointer;
    transition: transform 0.1s;
  }
  #waterButton:active {
    transform: scale(0.95);
  }
  #waterButton::after {
    content: '';
    position: absolute;
    top: 20%;
    left: 50%;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
    transform: translateX(-50%);
    opacity: 0.7;
  }
</style>
</head>
<body>

<div id="loginScreen">
  <h2>üåä Water Clicker - Login</h2>
  <input id="loginName" type="text" placeholder="Username"><br>
  <input id="loginPass" type="password" placeholder="Password"><br>
  <button onclick="login()">Login</button>
  <button onclick="register()">Register</button>
</div>

<div id="gameScreen" style="display:none;">
  <h2 id="playerNameDisplay"></h2>
  <button onclick="logout()">Logout</button>
  <hr>

  <h1>üíß Water: <span id="water">0</span></h1>
  <h3>Multiplier: <span id="multiplier">1</span> | Auto: <span id="autoRate">0</span>/s</h3>
  <h3>Rebirths: <span id="rebirths">0</span> | Next Rebirth: <span id="rebirthReq">1,000,000</span></h3>
  <h3>Prestige: <span id="prestige">0</span> | Next Prestige: <span id="prestigeReq">1,000,000,000,000</span></h3>

  <div id="waterButtonContainer" style="margin-top: 20px;">
    <div id="waterButton" onclick="clickWater()"></div>
  </div>

  <button onclick="rebirth()">üîÑ Rebirth</button>
  <button onclick="prestige()">‚ú® Prestige</button>
  <br>
  <button onclick="saveGame()">üíæ Save</button>
  <button onclick="loadAccount()">üìÇ Load</button>
  <button onclick="resetAccount()">‚ö†Ô∏è Hard Reset</button>

  <div id="upgradesContainer">
    <div class="upgradeColumn" id="clickUpgrades"></div>
    <div class="upgradeColumn" id="autoUpgrades"></div>
  </div>

  <h2>üèÜ Leaderboard</h2>
  <div id="leaderboard"></div>
</div>

<script>
let water = 0, multiplier = 1, autoRate = 0;
let rebirths = 0, rebirthMultiplier = 1, rebirthRequirement = 1e6;
let prestiges = 0, prestigeMultiplier = 1, prestigeRequirement = 1e12;
let currentUser = null;
let isOwner = false;

// --- CLICK UPGRADES ---
const clickUpgrades = [
 { name: "Drip", effect: 2, cost: 5, level: 0 },
  { name: "Splash", effect: 5, cost: 10, level: 0 },
  { name: "Droplet", effect: 10, cost: 20, level: 0 },
  { name: "Puddle", effect: 25, cost: 50, level: 0 },
  { name: "Stream", effect: 50, cost: 120, level: 0 },
  { name: "Brook", effect: 100, cost: 250, level: 0 },
  { name: "River", effect: 250, cost: 600, level: 0 },
  { name: "Waterfall", effect: 500, cost: 1200, level: 0 },
  { name: "Wave", effect: 1000, cost: 2500, level: 0 },
  { name: "Tide", effect: 2500, cost: 5000, level: 0 },
  { name: "Whirlpool", effect: 5000, cost: 10000, level: 0 },
  { name: "Flood", effect: 10000, cost: 20000, level: 0 },
  { name: "Monsoon", effect: 25000, cost: 50000, level: 0 },
  { name: "Tsunami", effect: 50000, cost: 100000, level: 0 },
  { name: "Leviathan", effect: 100000, cost: 250000, level: 0 },
  { name: "Poseidon", effect: 250000, cost: 500000, level: 0 },
  { name: "Ocean Colossus", effect: 500000, cost: 1000000, level: 0 },
  { name: "Maelstrom Titan", effect: 1000000, cost: 2500000, level: 0 },
  { name: "Typhoon King", effect: 2500000, cost: 5000000, level: 0 },
  { name: "Infinity Surge", effect: 5000000, cost: 10000000, level: 0 },
  { name: "Abyssal Wave", effect: 1e7, cost: 2e7, level: 0 },
  { name: "Cosmic Tide", effect: 2e7, cost: 5e7, level: 0 },
  { name: "Galactic Flood", effect: 5e7, cost: 1e8, level: 0 },
  { name: "Eternal Stream", effect: 1e8, cost: 2e8, level: 0 },
  { name: "Leviathan Prime", effect: 2e8, cost: 5e8, level: 0 },
  { name: "Poseidon Ultima", effect: 5e8, cost: 1e9, level: 0 },
  { name: "Omega Wave", effect: 1e9, cost: 2e9, level: 0 },
  { name: "Tidal Titan", effect: 2e9, cost: 5e9, level: 0 },
  { name: "Supernova Flood", effect: 5e9, cost: 1e10, level: 0 },
  { name: "Cosmic Maelstrom", effect: 1e10, cost: 2e10, level: 0 },
  { name: "Infinity Tsunami", effect: 2e10, cost: 5e10, level: 0 },
  { name: "Omega Leviathan", effect: 5e10, cost: 1e11, level: 0 },
  { name: "Eternal Wave", effect: 1e11, cost: 2e11, level: 0 },
  { name: "Poseidon King", effect: 2e11, cost: 5e11, level: 0 },
  { name: "Abyssal Titan", effect: 5e11, cost: 1e12, level: 0 },
  { name: "Galactic Leviathan", effect: 1e12, cost: 2e12, level: 0 },
  { name: "Omega Tide", effect: 2e12, cost: 5e12, level: 0 },
  { name: "Infinity Wave", effect: 5e12, cost: 1e13, level: 0 },
  { name: "Supernova Tide", effect: 1e13, cost: 2e13, level: 0 },
  { name: "Cosmic Ocean", effect: 2e13, cost: 5e13, level: 0 },
  { name: "Eternal Leviathan", effect: 5e13, cost: 1e14, level: 0 },
  { name: "Omega Ocean", effect: 1e14, cost: 2e14, level: 0 },
  { name: "Infinity Flood", effect: 2e14, cost: 5e14, level: 0 },
  { name: "Galactic Ocean", effect: 5e14, cost: 1e15, level: 0 },
  { name: "Tsunami King", effect: 1e15, cost: 2e15, level: 0 },
  { name: "Abyssal Leviathan Prime", effect: 2e15, cost: 5e15, level: 0 },
  { name: "Poseidon Emperor", effect: 5e15, cost: 1e16, level: 0 },
  { name: "Omega Leviathan Prime", effect: 1e16, cost: 2e16, level: 0 },
  { name: "Infinity Ocean Prime", effect: 2e16, cost: 5e16, level: 0 },
  { name: "Supernova Leviathan", effect: 5e16, cost: 1e17, level: 0 },
  { name: "Cosmic Leviathan Prime", effect: 1e17, cost: 2e17, level: 0 },
  { name: "Eternal Flood", effect: 2e17, cost: 5e17, level: 0 },
  { name: "Omega Flood Prime", effect: 5e17, cost: 1e18, level: 0 },
  { name: "Infinity Leviathan Prime", effect: 1e18, cost: 2e18, level: 0 },
  { name: "Supernova Ocean Prime", effect: 2e18, cost: 5e18, level: 0 },
  { name: "Cosmic Flood Prime", effect: 5e18, cost: 1e19, level: 0 },
  { name: "Omega Ocean Prime", effect: 1e19, cost: 2e19, level: 0 },
  { name: "Infinity Tsunami Prime", effect: 2e19, cost: 5e19, level: 0 },
  { name: "Eternal Leviathan Prime", effect: 5e19, cost: 1e20, level: 0 },
  { name: "Supernova Flood Prime", effect: 1e20, cost: 2e20, level: 0 },
  { name: "Omega Leviathan Emperor", effect: 2e20, cost: 5e20, level: 0 },
  { name: "Infinity Ocean Emperor", effect: 5e20, cost: 1e21, level: 0 }
];
// --- AUTO UPGRADES ---
const autoUpgrades = [
  { name: "Drizzle", effect: 5, cost: 10, level: 0 },
  { name: "Trickle", effect: 15, cost: 30, level: 0 },
  { name: "Rill", effect: 50, cost: 120, level: 0 },
  { name: "Brooklet", effect: 120, cost: 300, level: 0 },
  { name: "Creek", effect: 300, cost: 750, level: 0 },
  { name: "Stream", effect: 750, cost: 1500, level: 0 },
  { name: "River", effect: 2000, cost: 4000, level: 0 },
  { name: "Rapids", effect: 5000, cost: 10000, level: 0 },
  { name: "Waterfall", effect: 12000, cost: 25000, level: 0 },
  { name: "Wave", effect: 30000, cost: 60000, level: 0 },
  { name: "Tide", effect: 75000, cost: 150000, level: 0 },
  { name: "Whirlpool", effect: 200000, cost: 400000, level: 0 },
  { name: "Flood", effect: 500000, cost: 1e6, level: 0 },
  { name: "Monsoon", effect: 1.2e6, cost: 2.5e6, level: 0 },
  { name: "Tsunami", effect: 3e6, cost: 6e6, level: 0 },
  { name: "Leviathan", effect: 7.5e6, cost: 1.5e7, level: 0 },
  { name: "Poseidon", effect: 2e7, cost: 4e7, level: 0 },
  { name: "Ocean Colossus", effect: 5e7, cost: 1e8, level: 0 },
  { name: "Maelstrom Titan", effect: 1.2e8, cost: 2.5e8, level: 0 },
  { name: "Typhoon King", effect: 3e8, cost: 6e8, level: 0 },
  { name: "Abyssal Wave", effect: 7.5e8, cost: 1.5e9, level: 0 },
  { name: "Cosmic Tide", effect: 2e9, cost: 4e9, level: 0 },
  { name: "Galactic Flood", effect: 5e9, cost: 1e10, level: 0 },
  { name: "Eternal Stream", effect: 1.2e10, cost: 2.5e10, level: 0 },
  { name: "Leviathan Prime", effect: 3e10, cost: 6e10, level: 0 },
  { name: "Poseidon Ultima", effect: 7.5e10, cost: 1.5e11, level: 0 },
  { name: "Omega Wave", effect: 2e11, cost: 4e11, level: 0 },
  { name: "Tidal Titan", effect: 5e11, cost: 1e12, level: 0 },
  { name: "Supernova Flood", effect: 1.2e12, cost: 2.5e12, level: 0 },
  { name: "Cosmic Maelstrom", effect: 3e12, cost: 6e12, level: 0 },
  { name: "Infinity Tsunami", effect: 7.5e12, cost: 1.5e13, level: 0 },
  { name: "Omega Leviathan", effect: 2e13, cost: 4e13, level: 0 },
  { name: "Eternal Wave", effect: 5e13, cost: 1e14, level: 0 },
  { name: "Poseidon King", effect: 1.2e14, cost: 2.5e14, level: 0 },
  { name: "Abyssal Titan", effect: 3e14, cost: 6e14, level: 0 },
  { name: "Galactic Leviathan", effect: 7.5e14, cost: 1.5e15, level: 0 },
  { name: "Omega Tide", effect: 2e15, cost: 4e15, level: 0 },
  { name: "Infinity Wave", effect: 5e15, cost: 1e16, level: 0 },
  { name: "Supernova Tide", effect: 1.2e16, cost: 2.5e16, level: 0 },
  { name: "Cosmic Ocean", effect: 3e16, cost: 6e16, level: 0 },
  { name: "Eternal Leviathan", effect: 7.5e16, cost: 1.5e17, level: 0 },
  { name: "Omega Ocean", effect: 2e17, cost: 4e17, level: 0 },
  { name: "Infinity Flood", effect: 5e17, cost: 1e18, level: 0 },
  { name: "Galactic Ocean", effect: 1.2e18, cost: 2.5e18, level: 0 },
  { name: "Tsunami King", effect: 3e18, cost: 6e18, level: 0 },
  { name: "Abyssal Leviathan Prime", effect: 7.5e18, cost: 1.5e19, level: 0 },
  { name: "Poseidon Emperor", effect: 2e19, cost: 4e19, level: 0 },
  { name: "Omega Leviathan Prime", effect: 5e19, cost: 1e20, level: 0 },
  { name: "Infinity Ocean Prime", effect: 1.2e20, cost: 2.5e20, level: 0 },
  { name: "Supernova Leviathan", effect: 3e20, cost: 6e20, level: 0 },
  { name: "Cosmic Leviathan Prime", effect: 7.5e20, cost: 1.5e21, level: 0 },
  { name: "Eternal Flood", effect: 2e21, cost: 4e21, level: 0 },
  { name: "Omega Flood Prime", effect: 5e21, cost: 1e22, level: 0 },
  { name: "Infinity Leviathan Prime", effect: 1.2e22, cost: 2.5e22, level: 0 },
  { name: "Supernova Ocean Prime", effect: 3e22, cost: 6e22, level: 0 }
];

// --- GAME LOOP ---
function clickWater() {
  water += multiplier * rebirthMultiplier * prestigeMultiplier;
  updateDisplay();
}

setInterval(() => {
  water += autoRate * rebirthMultiplier * prestigeMultiplier;
  updateDisplay();
}, 1000);

// --- REBIRTH ---
function rebirth() {
  if (water >= rebirthRequirement) {
    rebirths++;
    rebirthMultiplier *= 2;
    water = 0; multiplier = 1; autoRate = 0;
    clickUpgrades.forEach(u => u.level = 0);
    autoUpgrades.forEach(u => u.level = 0);
    rebirthRequirement *= 100;
    saveGame(); updateDisplay();
    alert("Rebirth successful! Total rebirths: " + rebirths);
  }
}

// --- PRESTIGE ---
function prestige() {
  if (rebirths >= 10 && water >= prestigeRequirement) {
    prestiges++;
    prestigeMultiplier *= 10;
    rebirths = 0; rebirthMultiplier = 1;
    water = 0; multiplier = 1; autoRate = 0;
    rebirthRequirement = 1e6; prestigeRequirement *= 100;
    clickUpgrades.forEach(u => u.level = 0);
    autoUpgrades.forEach(u => u.level = 0);
    saveGame(); updateDisplay();
    alert("‚ú® Prestige unlocked! Total prestiges: " + prestiges);
  }
}

// --- BUY UPGRADE ---
function buyUpgrade(list, index) {
  const u = list[index];
  if (water >= u.cost) {
    water -= u.cost;
    if (list === clickUpgrades) multiplier *= u.effect;
    else autoRate += u.effect;
    u.level++; u.cost = Math.floor(u.cost * 1.5);
    saveGame(); updateDisplay();
  }
}

// --- UPDATE DISPLAY ---
function updateDisplay() {
  document.getElementById("water").innerText = water.toLocaleString();
  document.getElementById("multiplier").innerText = multiplier.toLocaleString();
  document.getElementById("autoRate").innerText = autoRate.toLocaleString();
  document.getElementById("rebirths").innerText = rebirths;
  document.getElementById("rebirthReq").innerText = rebirthRequirement.toLocaleString();
  document.getElementById("prestige").innerText = prestiges;
  document.getElementById("prestigeReq").innerText = prestigeRequirement.toLocaleString();

  const clickDiv = document.getElementById("clickUpgrades");
  clickDiv.innerHTML = "";
  clickUpgrades.forEach((u, i) => {
    clickDiv.innerHTML += `<div class="upgrade">${u.name} (x${u.effect}) | Cost: ${u.cost.toLocaleString()} | Lv: ${u.level}
      <button onclick="buyUpgrade(clickUpgrades, ${i})">Buy</button></div>`;
  });

  const autoDiv = document.getElementById("autoUpgrades");
  autoDiv.innerHTML = "";
  autoUpgrades.forEach((u, i) => {
    autoDiv.innerHTML += `<div class="upgrade">${u.name} (+${u.effect}/s) | Cost: ${u.cost.toLocaleString()} | Lv: ${u.level}
      <button onclick="buyUpgrade(autoUpgrades, ${i})">Buy</button></div>`;
  });

  updateLeaderboard();
}

// --- SAVE / LOAD ---
function saveGame() {
  if (!currentUser) return;
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  accounts[currentUser].data = { 
    water, multiplier, autoRate, rebirths, rebirthMultiplier, rebirthRequirement,
    prestiges, prestigeMultiplier, prestigeRequirement, 
    clickUpgrades, autoUpgrades 
  };
  localStorage.setItem("accounts", JSON.stringify(accounts));
}

function loadAccount() {
  if (!currentUser) return;
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  if (accounts[currentUser].data) loadGame(accounts[currentUser].data);
  updateDisplay();
}

function loadGame(data) {
  if (!data) return;
  water = data.water || 0;
  multiplier = data.multiplier || 1;
  autoRate = data.autoRate || 0;
  rebirths = data.rebirths || 0;
  rebirthMultiplier = data.rebirthMultiplier || 1;
  rebirthRequirement = data.rebirthRequirement || 1e6;
  prestiges = data.prestiges || 0;
  prestigeMultiplier = data.prestigeMultiplier || 1;
  prestigeRequirement = data.prestigeRequirement || 1e12;
  if (data.clickUpgrades) clickUpgrades.forEach((u, i) => Object.assign(u, data.clickUpgrades[i]));
  if (data.autoUpgrades) autoUpgrades.forEach((u, i) => Object.assign(u, data.autoUpgrades[i]));
}

// --- LOGIN SYSTEM ---
function login() {
  const username = document.getElementById("loginName").value.trim();
  const password = document.getElementById("loginPass").value;
  if (!username || !password) { alert("Enter both username and password!"); return; }
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  if (accounts[username]) {
    if (accounts[username].password === password) {
      currentUser = username;
      isOwner = accounts[username].owner || false;
      loadGame(accounts[username].data || {});
      document.getElementById("loginScreen").style.display = "none";
      document.getElementById("gameScreen").style.display = "block";
      document.getElementById("playerNameDisplay").innerText = (isOwner ? "‚≠ê Owner: " : "Player: ") + username;
      updateDisplay();
    } else alert("Wrong password!");
  } else alert("Account not found. Please register.");
}

function register() {
  const username = document.getElementById("loginName").value.trim();
  const password = document.getElementById("loginPass").value;
  if (!username || !password) { alert("Enter both username and password!"); return; }
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  if (accounts[username]) { alert("Username already exists!"); return; }
  accounts[username] = { password, data: {} };
  localStorage.setItem("accounts", JSON.stringify(accounts));
  alert("Account created! You can now log in.");
}

function logout() {
  saveGame();
  currentUser = null;
  isOwner = false;
  document.getElementById("gameScreen").style.display = "none";
  document.getElementById("loginScreen").style.display = "block";
}

// --- RESET ACCOUNT ---
function resetAccount() {
  if (!currentUser) return;
  if (!confirm("Are you sure you want to reset your account?")) return;
  water = 0; multiplier = 1; autoRate = 0;
  rebirths = 0; rebirthMultiplier = 1; rebirthRequirement = 1e6;
  prestiges = 0; prestigeMultiplier = 1; prestigeRequirement = 1e12;
  clickUpgrades.forEach(u => u.level = 0);
  autoUpgrades.forEach(u => u.level = 0);
  saveGame(); updateDisplay();
}

// --- LEADERBOARD ---
function updateLeaderboard() {
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  const scores = [];
  for (let user in accounts) {
    const d = accounts[user].data || {};
    scores.push({ name: user, prestiges: d.prestiges || 0, rebirths: d.rebirths || 0, water: d.water || 0 });
  }
  scores.sort((a, b) => b.prestiges - a.prestiges || b.rebirths - a.rebirths || b.water - a.water);
  const board = document.getElementById("leaderboard");
  board.innerHTML = scores.slice(0, 10).map((s, i) => 
    `${i+1}. ${s.name} - Prestige: ${s.prestiges}, Rebirths: ${s.rebirths}, Water: ${s.water.toLocaleString()}`
  ).join("<br>");
}
</script>
</body>
</html>
