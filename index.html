<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Water Clicker</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #e0f7fa; }
    #gameScreen { margin-top: 20px; }
    .upgrade { margin: 5px; padding: 10px; border: 1px solid #00796b; border-radius: 5px; background: #b2dfdb; }
    button { margin: 5px; padding: 10px; }
    #leaderboard { margin-top: 20px; text-align: left; width: 300px; margin-left: auto; margin-right: auto; }
  </style>
</head>
<body>

  <!-- LOGIN SCREEN -->
  <div id="loginScreen">
    <h2>🌊 Water Clicker - Login</h2>
    <input id="loginName" type="text" placeholder="Username"><br>
    <input id="loginPass" type="password" placeholder="Password"><br>
    <button onclick="login()">Login</button>
    <button onclick="register()">Register</button>
  </div>

  <!-- GAME SCREEN -->
  <div id="gameScreen" style="display:none;">
    <h2 id="playerNameDisplay"></h2>
    <button onclick="logout()">Logout</button>
    <hr>

    <h1>💧 Water: <span id="water">0</span></h1>
    <h3>Multiplier: <span id="multiplier">1</span> | Auto: <span id="autoRate">0</span>/s</h3>
    <h3>Rebirths: <span id="rebirths">0</span> | Next Rebirth: <span id="rebirthReq">1,000,000</span></h3>
    <h3>Prestige: <span id="prestige">0</span> | Next Prestige: <span id="prestigeReq">1,000,000,000,000</span></h3>

    <button onclick="clickWater()">💧 Click Water</button>
    <button onclick="rebirth()">🔄 Rebirth</button>
    <button onclick="prestige()">✨ Prestige</button>
    <br>
    <button onclick="saveGame()">💾 Save</button>
    <button onclick="loadAccount()">📂 Load</button>
    <button onclick="resetAccount()">⚠️ Hard Reset</button>

    <h2>⚡ Click Upgrades</h2>
    <div id="clickUpgrades"></div>

    <h2>🌊 Auto Upgrades</h2>
    <div id="autoUpgrades"></div>

    <h2>🏆 Leaderboard</h2>
    <div id="leaderboard"></div>
  </div>

<script>
let water = 0;
let multiplier = 1;
let autoRate = 0;
let rebirths = 0;
let rebirthMultiplier = 1;
let rebirthRequirement = 1e6;
let prestiges = 0;
let prestigeMultiplier = 1;
let prestigeRequirement = 1e12;
let currentUser = null;

// --- CLICK UPGRADES ---
const clickUpgrades = [
  { name: "Splash", effect: 2, cost: 15, level: 0 },
  { name: "Soak", effect: 5, cost: 40, level: 0 },
  { name: "Gush", effect: 10, cost: 75, level: 0 },
  { name: "Surge", effect: 25, cost: 150, level: 0 },
  { name: "Torrent", effect: 50, cost: 300, level: 0 },
  { name: "Cascade", effect: 100, cost: 600, level: 0 },
  { name: "Deluge", effect: 500, cost: 1200, level: 0 },
  { name: "Breaker", effect: 1000, cost: 2500, level: 0 },
  { name: "Typhoon", effect: 5000, cost: 5000, level: 0 },
  { name: "Cyclone", effect: 10000, cost: 10000, level: 0 },
  { name: "Cyclone", effect: 10000, cost: 100000, level: 0 },
  { name: "Infinity Surge", effect: 1e18, cost: 1e21, level: 0 }
];

// --- AUTO UPGRADES ---
const autoUpgrades = [
  { name: "Drip", effect: 1, cost: 10, level: 0 },
  { name: "Stream", effect: 10, cost: 100, level: 0 },
  { name: "River", effect: 100, cost: 500, level: 0 },
  { name: "Wave", effect: 2000, cost: 2000, level: 0 },
  { name: "Tide", effect: 10000, cost: 5000, level: 0 },
  { name: "Whirlpool", effect: 50000, cost: 25000, level: 0 },
  { name: "Monsoon", effect: 1_000_000, cost: 100000, level: 0 },
  { name: "Ocean", effect: 5_000_000, cost: 250000, level: 0 },
  { name: "Tsunami", effect: 50_000_000, cost: 500000, level: 0 },
  { name: "Infinity Tide", effect: 5e12, cost: 1e24, level: 0 }
];

// --- GAME LOOP ---
function clickWater() {
  water += multiplier * rebirthMultiplier * prestigeMultiplier;
  updateDisplay();
}

setInterval(() => {
  water += autoRate * rebirthMultiplier * prestigeMultiplier;
  updateDisplay();
}, 1000);

// --- REBIRTH ---
function rebirth() {
  if (water >= rebirthRequirement && rebirths < 10) {
    rebirths++;
    rebirthMultiplier *= 2;
    water = 0; multiplier = 1; autoRate = 0;
    clickUpgrades.forEach(u => u.level = 0);
    autoUpgrades.forEach(u => u.level = 0);
    rebirthRequirement *= 100;
    alert("Rebirth successful! Total rebirths: " + rebirths);
    saveGame(); updateDisplay();
  }
}

// --- PRESTIGE ---
function prestige() {
  if (rebirths >= 10 && water >= prestigeRequirement) {
    prestiges++;
    prestigeMultiplier *= 10;
    rebirths = 0; rebirthMultiplier = 1;
    water = 0; multiplier = 1; autoRate = 0;
    rebirthRequirement = 1e6; prestigeRequirement *= 100;
    clickUpgrades.forEach(u => u.level = 0);
    autoUpgrades.forEach(u => u.level = 0);
    alert("✨ Prestige unlocked! Total prestiges: " + prestiges);
    saveGame(); updateDisplay();
  }
}

// --- BUY UPGRADE ---
function buyUpgrade(list, index) {
  const u = list[index];
  if (water >= u.cost) {
    water -= u.cost;
    if (list === clickUpgrades) multiplier *= u.effect;
    else autoRate += u.effect;
    u.level++; u.cost = Math.floor(u.cost * 1.5);
    updateDisplay(); saveGame();
  }
}

// --- UI UPDATE ---
function updateDisplay() {
  document.getElementById("water").innerText = water.toLocaleString();
  document.getElementById("multiplier").innerText = multiplier.toLocaleString();
  document.getElementById("autoRate").innerText = autoRate.toLocaleString();
  document.getElementById("rebirths").innerText = rebirths;
  document.getElementById("rebirthReq").innerText = rebirthRequirement.toLocaleString();
  document.getElementById("prestige").innerText = prestiges;
  document.getElementById("prestigeReq").innerText = prestigeRequirement.toLocaleString();

  const clickDiv = document.getElementById("clickUpgrades");
  clickDiv.innerHTML = "";
  clickUpgrades.forEach((u, i) => {
    clickDiv.innerHTML += `<div class="upgrade">${u.name} (x${u.effect}) | Cost: ${u.cost.toLocaleString()} | Lv: ${u.level}
      <button onclick="buyUpgrade(clickUpgrades, ${i})">Buy</button></div>`;
  });

  const autoDiv = document.getElementById("autoUpgrades");
  autoDiv.innerHTML = "";
  autoUpgrades.forEach((u, i) => {
    autoDiv.innerHTML += `<div class="upgrade">${u.name} (+${u.effect}/s) | Cost: ${u.cost.toLocaleString()} | Lv: ${u.level}
      <button onclick="buyUpgrade(autoUpgrades, ${i})">Buy</button></div>`;
  });

  updateLeaderboard();
}

// --- SAVE / LOAD ---
function saveGame() {
  if (!currentUser) return;
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  accounts[currentUser].data = { 
    water, multiplier, autoRate, rebirths, rebirthMultiplier, rebirthRequirement,
    prestiges, prestigeMultiplier, prestigeRequirement, 
    clickUpgrades, autoUpgrades 
  };
  localStorage.setItem("accounts", JSON.stringify(accounts));
}

function loadAccount() {
  if (!currentUser) return;
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  loadGame(accounts[currentUser].data); updateDisplay();
}

function loadGame(data) {
  if (!data) return;
  water = data.water || 0;
  multiplier = data.multiplier || 1;
  autoRate = data.autoRate || 0;
  rebirths = data.rebirths || 0;
  rebirthMultiplier = data.rebirthMultiplier || 1;
  rebirthRequirement = data.rebirthRequirement || 1e6;
  prestiges = data.prestiges || 0;
  prestigeMultiplier = data.prestigeMultiplier || 1;
  prestigeRequirement = data.prestigeRequirement || 1e12;
  if (data.clickUpgrades) clickUpgrades.forEach((u, i) => Object.assign(u, data.clickUpgrades[i]));
  if (data.autoUpgrades) autoUpgrades.forEach((u, i) => Object.assign(u, data.autoUpgrades[i]));
}

// --- LOGIN SYSTEM ---
function login() {
  const username = document.getElementById("loginName").value.trim();
  const password = document.getElementById("loginPass").value;
  if (!username || !password) { alert("Enter both username and password!"); return; }
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  if (accounts[username]) {
    if (accounts[username].password === password) {
      currentUser = username;
      loadGame(accounts[username].data);
      document.getElementById("loginScreen").style.display = "none";
      document.getElementById("gameScreen").style.display = "block";
      document.getElementById("playerNameDisplay").innerText = "Player: " + username;
      updateDisplay();
    } else alert("Wrong password!");
  } else alert("Account not found. Please register.");
}

function register() {
  const username = document.getElementById("loginName").value.trim();
  const password = document.getElementById("loginPass").value;
  if (!username || !password) { alert("Enter both username and password!"); return; }
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  if (accounts[username]) { alert("Username already exists!"); return; }
  accounts[username] = { password, data: {} };
  localStorage.setItem("accounts", JSON.stringify(accounts));
  alert("Account created! You can now log in.");
}

function logout() {
  saveGame();
  currentUser = null;
  document.getElementById("gameScreen").style.display = "none";
  document.getElementById("loginScreen").style.display = "block";
}

// --- RESET ACCOUNT ---
function resetAccount() {
  if (!currentUser) return;
  if (!confirm("Are you sure you want to reset your account?")) return;
  water = 0; multiplier = 1; autoRate = 0;
  rebirths = 0; rebirthMultiplier = 1; rebirthRequirement = 1e6;
  prestiges = 0; prestigeMultiplier = 1; prestigeRequirement = 1e12;
  clickUpgrades.forEach(u => u.level = 0);
  autoUpgrades.forEach(u => u.level = 0);
  saveGame(); updateDisplay();
}

// --- LEADERBOARD ---
function updateLeaderboard() {
  const accounts = JSON.parse(localStorage.getItem("accounts") || "{}");
  const scores = [];
  for (let user in accounts) {
    const d = accounts[user].data || {};
    scores.push({ name: user, prestiges: d.prestiges || 0, rebirths: d.rebirths || 0, water: d.water || 0 });
  }
  scores.sort((a, b) => b.prestiges - a.prestiges || b.rebirths - a.rebirths || b.water - a.water);
  const board = document.getElementById("leaderboard");
  board.innerHTML = scores.slice(0, 10).map((s, i) => 
    `${i+1}. ${s.name} - Prestige: ${s.prestiges}, Rebirths: ${s.rebirths}, Water: ${s.water.toLocaleString()}`
  ).join("<br>");
}
</script>
</body>
</html>

</body>
</html>
